<div class="dialog-wrapper" fxLayout="row wrap" fxLayoutAlign="center start">
  <h2 mat-dialog-title>{{update? 'Update Company' : 'Create Company'}}</h2>

  <mat-dialog-content fxFlex="100">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" fxLayout="row wrap" novalidate>
      <fieldset fxFlex="100" fxLayout="row wrap">
        <legend>Company Details</legend>
        <div fxFlex="100">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> Name</mat-label>
            <input matInput formControlName="name" >
            <mat-error *ngIf="f.name.touched && f.name.invalid">
              <span *ngIf="f.name.errors.required">name is required</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="0" fxLayoutGap.gt-md="1%">
          <div fxFlex="100" fxFlex.gt-md="49.5">
            <mat-form-field class="form-field" appearance="outline">
              <mat-label> Email </mat-label>
              <input matInput formControlName="email" >
              <mat-error *ngIf="f.email.touched && f.email.invalid">
                <span *ngIf="f.email.errors.required">email is required</span>
              </mat-error>
            </mat-form-field>
          </div>
          <div fxFlex="100" fxFlex.gt-md="49.5">
            <mat-form-field class="form-field" appearance="outline">
              <mat-label> Phone </mat-label>
              <input matInput formControlName="phone">
              <mat-error *ngIf="f.phone.touched && f.phone.invalid">
                <span *ngIf="f.phone.errors.required">phone is required</span>
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="0" fxLayoutGap.gt-md="2%">
          <mat-form-field class="form-field" appearance="outline" fxFlex="100">
            <mat-label> Website </mat-label>
            <input matInput formControlName="website" >
          </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-md="49">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> Established </mat-label>
            <mat-label>Choose a date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="established">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </fieldset>

      <fieldset formGroupName="address" fxFlex="100" fxLayout="row wrap" fxLayoutGap="0" fxLayoutGap.gt-md="1%">
        <legend>Address</legend>

        <div fxFlex="100" fxFlex.gt-md="49">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> Street </mat-label>
            <input matInput formControlName="street" >
            <mat-error *ngIf="form.get('address').get('street').touched && form.get('address').get('street').invalid">
              <span *ngIf="form.get('address').get('street').errors.required"> street is required</span>
            </mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-md="49">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> City </mat-label>
            <input matInput formControlName="city">
            <mat-error *ngIf="form.get('address').get('city').touched && form.get('address').get('city').invalid">
              <span *ngIf="form.get('address').get('city').errors.required">City is required</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-md="49">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> State </mat-label>
            <input matInput formControlName="state" >
            <mat-error *ngIf="form.get('address').get('state').touched && form.get('address').get('state').invalid">
              <span *ngIf="form.get('address').get('state').errors.required">State is required</span>
            </mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-md="49">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> Zip </mat-label>
            <input type="number" matInput formControlName="zip">
            <mat-error *ngIf="form.get('address').get('zip').touched && form.get('address').get('zip').invalid">
              <span *ngIf="form.get('address').get('zip').errors.required">Zip Code is required</span>
            </mat-error>
          </mat-form-field>
        </div>
      </fieldset>

      <fieldset fxFlex="100" fxLayout="row wrap" fxLayoutGap="0" fxLayoutGap.gt-md="1%">
        <legend>Business Info</legend>

        <div fxFlex="100" fxFlex.gt-md="29">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label>Company Size</mat-label>
            <mat-select formControlName="companySize">
              <mat-option *ngFor="let cs of CompanySizeOptions" [value]="cs.value">{{cs.label}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-md="29">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label>Subscription Type</mat-label>
            <mat-select formControlName="subscriptionType">
              <mat-option *ngFor="let sub of Subscriptions" [value]="sub.value">{{sub.label}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-md="39">
          <mat-form-field class="form-field" appearance="outline">
            <mat-label> Metric ID </mat-label>
            <input matInput formControlName="metricId" >
            <mat-error *ngIf="f.metricId.touched && f.metricId.invalid">
              <span *ngIf="f.metricId.errors.required">Metric Id is required</span>
            </mat-error>
          </mat-form-field>
        </div>

        <div fxFlex="100" fxFlex.gt-md="99" fxLayout="row">
          <ul class="checkbox-group-list" fxFlex="100">
            <li *ngFor="let sl of StateLicenceChecks; let i = index">
              <a fxLayout="row" (click)="toggleLicence(i, sl.selected)" class="check-link" [ngClass]="{ 'checked' : sl.selected }">
                <span>
                  <mat-icon *ngIf="sl.selected">check_circle</mat-icon>
                  <mat-icon *ngIf="!sl.selected">check_circle_outline</mat-icon>
                </span>
                <span class="ml-4">{{sl.name}}</span>
              </a>
            </li>
          </ul>
          <!--<mat-checkbox *ngFor="let cb of StateLicenseTypes"-->
                        <!--[checked]="cb"-->
                        <!--(change)="stateLicChange($event)">-->
          <!--</mat-checkbox>-->
        </div>
      </fieldset>

      <div fxFlex="100" fxLayout="row wrap" fxLayoutGap="10px" fxLayoutAlign="end start">
        <button type="submit" class="mat-raised-button mat-primary">{{ update ? 'Update' : 'Save' }}</button>
        <button type="button" class="mat-raised-button" (click)="close()">Close</button>
      </div>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions fxFlex="100" fxLayout="row wrap" fxLayoutGap="10px" fxLayoutAlign="end start">
  </mat-dialog-actions>

</div>
